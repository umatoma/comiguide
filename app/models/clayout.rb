# == Schema Information
#
# Table name: clayouts
#
#  id        :integer          not null, primary key
#  cblock_id :integer          not null
#  space_no  :integer          not null
#  layout    :integer          not null
#  pos_x     :integer          not null
#  pos_y     :integer          not null
#

class Clayout < ActiveRecord::Base
  # ----------------------------------------------------------
  # Constant
  # ----------------------------------------------------------
  MARGIN_X = 20
  MARGIN_Y = 30

  # ----------------------------------------------------------
  # Relation
  # ----------------------------------------------------------
  belongs_to :cblock
  has_many :ccircle_checklists

  # ----------------------------------------------------------
  # Validation
  # ----------------------------------------------------------
  validates :cblock_id, presence: true, numericality: true
  validates :space_no,  presence: true, numericality: true
  validates :layout,    presence: true, numericality: true
  validates :pos_x,     presence: true, numericality: true
  validates :pos_y,     presence: true, numericality: true

  def layout_info_simple
    "#{cblock.name} - #{space_no}"
  end

  def scaled_pos_x
    pos_x - MARGIN_X
  end

  def scaled_pos_y
    pos_y - MARGIN_Y
  end
end
